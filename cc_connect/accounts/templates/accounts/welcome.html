<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/overview.css' %}">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-left">
            <img src="{% static 'images/logo.svg' %}" alt="Logo" class="logo">
            <span class="navbar-title">Cross Cultural Connect</span>
        </div>
        <div class="navbar-links">
            <a href="{% url 'overview' %}">Overview</a>
            <a href="{% url 'message_board' %}">Message Board</a>
            <a>Businesses</a>
            <a>Map🗺️</a>
            <a class="profile-icon">P</a>
        </div>
    </nav>

    <!-- Main Grid Layout -->
    <main class="grid-container">
        <!-- A: Welcome Section -->
        <section class="grid-item welcome-header">
            <h1>Welcome Back, {{ user.username }} 👋</h1>
            <p>Your personalized community dashboard awaits.</p>
        </section>

        <!-- B: Community Highlights -->
        <section class="grid-item highlights">
            <h2>Community Highlights</h2>
            <p>Discover the latest events, meetups, and important announcements in your area.</p>
            <button class="btn-primary">Explore Now</button>
        </section>

        <!-- C: Local Events -->
        <section class="grid-item access-card">
            <h3>Local Events🌆</h3>
            <p>Upcoming markets and pop-ups.</p>
            <button class="btn-primary">View Events</button>
        </section>

        <!-- D: Businesses -->
        <section class="grid-item access-card">
            <h3>Businesses🏚️</h3>
            <p>Support immigrant-owned businesses in your community.</p>
            <button class="btn-primary">Explore Businesses</button>
        </section>

        <!-- E: Community Messages -->
        <section class="grid-item access-card">
            <h3>Community Messages👂</h3>
            <p>See what others are sharing.</p>
            <button class="btn-primary">View Messages</button>
        </section>

       <!-- F: Translator Section -->
<section class="translator-section">
    <div class="translator-text">
        <h2>Translator</h2>
        <p>Use the translator below to bridge communication gaps in your community.</p>
    </div>
    <div class="translator-interface">
        <textarea id="text-input" placeholder="Enter text to translate..."></textarea>
        <textarea id="text-output" placeholder="Your translation will appear here..." readonly></textarea>
    </div>
    <div class="translator-controls">
        <select id="language-select">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="pt">Portuguese</option>
        </select>
        <button id="translate-button">Generate</button>
    </div>
</section>

</main>
</body>
</html>

<!-- JavaScript -->
<script>
    document.getElementById("translate-button").addEventListener("click", function(event) {
        event.preventDefault(); // Prevent page reload

        const text = document.getElementById("text-input").value.trim();
        const language = document.getElementById("language-select").value;

        if (!text) {
            alert("Please enter text to translate.");
            return;
        }

        fetch("{% url 'translate' %}", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token }}"
            },
            body: JSON.stringify({ text, language })
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                document.getElementById("text-output").value = `Error: ${data.error}`;
            } else {
                document.getElementById("text-output").value = data.translatedText;
            }
        })
        .catch(error => {
            console.error("Error:", error);
            document.getElementById("text-output").value = "An error occurred. Please try again.";
        });
    });
</script>
